<!DOCTYPE html>
<html lang="en" xmlns:v-on="http://www.w3.org/1999/xhtml" xmlns:v-band="http://www.w3.org/1999/xhtml"
      xmlns:v-bind="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <link href="static/css/styles.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet">

    <link rel="icon" href="static/favicon.ico" type="image/x-icon"/>
    <link rel="shortcut icon" href="static/favicon.ico" type="image/x-icon"/>

    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <title>GPA Calculator</title>
</head>
<body>
<div :class="{'mobile' : isMobile}" id="calculator">
    <nav class="navbar">
        <a class="navbar-brand" href="#">GSOM</a>
        <ul class="navbar-nav">
            <li class="nav-item active">
                <a class="nav-link" href="/calculator">Калькулятор</a>
            </li>
            <!--<li class="nav-item">
                <a class="nav-link" href="#">Рейтинг</a>
            </li>-->
        </ul>
        <ul class="navbar-right">
            <li class="nav-item">
                <input type="checkbox" class="checkbox" id="mobile" name="mobile" v-model="isMobile">
                <label for="mobile">Mobile</label>
            </li>
        </ul>
        <!-- <button class="btn btn-outline-light my-2 my-sm-0" type="submit">Log In</button> -->
    </nav>
    <div class="container-wid">
        <div class="title block">
            Добро пожаловать. На главной ничего нет, зато есть <a href="/calculator">калькулятор</a> среднего балла.
        </div>
        <button id="user-button">None</button>
        <form id="register-form">
            <input class="login" name="login" value="admin">
            <input class="password" name="password" value="admin">
            <input type="submit" name="submit" value="Register"/>
        </form>
        <form id="login-form">
            <input class="login" name="login" value="admin">
            <input class="password" name="password" value="admin">
            <input type="submit" name="submit" value="Login"/>
        </form>
        <form id="logout-form">
            <input type="submit" name="submit" value="Logout"/>
        </form>
    </div>
</div>


<script src="static/script/script-basic-vue.js"></script>
<script>
    $("#user-button").click(function () {
        $.get("http://127.0.0.1:5000/users/me").then(function (response) {
            console.log(response);
            $("#user-button").html(response['login']);
        })
    });

    $("#register-form").submit(function (e) {
        e.preventDefault();

        $.post("http://127.0.0.1:5000/users/register", $("#register-form").serialize()).done(function (response) {
            console.log(response)
        })
    });

    $("#login-form").submit(function (e) {
        e.preventDefault();

        $.post("http://127.0.0.1:5000/users/authorize", $("#register-form").serialize()).done(function (response) {
            console.log(response)
        })
    });

    $("#logout-form").submit(function (e) {
        e.preventDefault();

        $.post("http://127.0.0.1:5000/users/logout").done(function (response) {
            console.log(response)
        })
    })
</script>
</body>
</html>